<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>FSelectInstance Class — FSelectInstance • mlr3fselect</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="FSelectInstance Class — FSelectInstance" />
<meta property="og:description" content="Specifies a general feature selection scenario including performance evaluator
and archive for FSelect objects to act upon.
This class encodes the black box objective function that a FSelect object has to optimize.
It allows the basis operations of querying the objective with feature sets ($eval_batch()),
storing the evaluations in an internal archive and querying the archive ($archive()).
Evaluations of feature sets are performed in batches by calling mlr3::benchmark() internally.
Before and after a batch is evaluated, the Terminator is queried for the remaining budget.
If the available budget is exhausted, an exception is raised,
and no further evaluations can be performed from this point on.
A list of measures can be passed to the instance, and they will always be all evaluated.
However, single-criteria tuners optimize only the first measure.
The FSelect object is also supposed to store its final result,
consisting of a selected feature set
and associated estimated performance values, by calling the method instance$assign_result().
This class allows to display the optimization path of the feature selection
in varying levels of detail ($optimization_path())." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org" /></a>
        <a class="navbar-brand" href="../index.html">mlr3fselect <small>v0.1.0.9000</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr3fselect">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fab fa fab fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>FSelectInstance Class</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3fselect/blob/master/R/FSelectInstance.R'><code>R/FSelectInstance.R</code></a></small>
    <div class="hidden name"><code>FSelectInstance.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Specifies a general feature selection scenario including performance evaluator
and archive for <a href='FSelect.html'>FSelect</a> objects to act upon.
This class encodes the black box objective function that a <a href='FSelect.html'>FSelect</a> object has to optimize.
It allows the basis operations of querying the objective with feature sets (<code>$eval_batch()</code>),
storing the evaluations in an internal archive and querying the archive (<code>$archive()</code>).</p>
<p>Evaluations of feature sets are performed in batches by calling <code><a href='https://mlr3.mlr-org.com/reference/benchmark.html'>mlr3::benchmark()</a></code> internally.
Before and after a batch is evaluated, the <a href='Terminator.html'>Terminator</a> is queried for the remaining budget.
If the available budget is exhausted, an exception is raised,
and no further evaluations can be performed from this point on.</p>
<p>A list of measures can be passed to the instance, and they will always be all evaluated.
However, single-criteria tuners optimize only the first measure.</p>
<p>The <a href='FSelect.html'>FSelect</a> object is also supposed to store its final result,
consisting of a selected feature set
and associated estimated performance values, by calling the method <code>instance$assign_result()</code>.</p>
<p>This class allows to display the optimization path of the feature selection
in varying levels of detail (<code>$optimization_path()</code>).</p>
    </div>



    <h2 class="hasAnchor" id="super-class"><a class="anchor" href="#super-class"></a>Super class</h2>

    <p><code><a href='https://rdrr.io/pkg/bbotk/man/Instance.html'>bbotk::Instance</a></code> -&gt; <code>FSelectInstance</code></p>
    <h2 class="hasAnchor" id="active-bindings"><a class="anchor" href="#active-bindings"></a>Active bindings</h2>

    <p><div class="r6-active-bindings"></p><dl class='dl-horizontal'>
<dt><code>n_batch</code></dt><dd><p>Number of batches.</p></dd>

<dt><code>result</code></dt><dd><p>Result of the feature selection i.e. the optimal feature set and its estimated performances.</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>FSelectInstance$new()</code></a></p></li>
<li><p><a href='#method-print'><code>FSelectInstance$print()</code></a></p></li>
<li><p><a href='#method-eval_batch'><code>FSelectInstance$eval_batch()</code></a></p></li>
<li><p><a href='#method-fselect_objective'><code>FSelectInstance$fselect_objective()</code></a></p></li>
<li><p><a href='#method-archive'><code>FSelectInstance$archive()</code></a></p></li>
<li><p><a href='#method-optimization_path'><code>FSelectInstance$optimization_path()</code></a></p></li>
<li><p><a href='#method-best'><code>FSelectInstance$best()</code></a></p></li>
<li><p><a href='#method-assign_result'><code>FSelectInstance$assign_result()</code></a></p></li>
<li><p><a href='#method-clone'><code>FSelectInstance$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
<li><p><span class="pkg-link" data-pkg="bbotk" data-topic="Instance" data-id="format"><a href='../../bbotk/html/Instance.html#method-format'><code>bbotk::Instance$format()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="bbotk" data-topic="Instance" data-id="objective"><a href='../../bbotk/html/Instance.html#method-objective'><code>bbotk::Instance$objective()</code></a></span></p></li>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>
<p>Create new <code>FSelectInstance</code> object.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$new(
  task,
  learner,
  resampling,
  measures,
  terminator,
  bm_args = list()
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>task</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Task.html'>mlr3::Task</a></p></dd>

<dt><code>learner</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Learner.html'>mlr3::Learner</a></p></dd>

<dt><code>resampling</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Resampling.html'>mlr3::Resampling</a> Note that uninstantiated resamplings are instantiated during construction so that all configurations.</p></dd>

<dt><code>measures</code></dt><dd><p>list of <a href='https://mlr3.mlr-org.com/reference/Measure.html'>mlr3::Measure</a></p></dd>

<dt><code>terminator</code></dt><dd><p><a href='Terminator.html'>Terminator</a></p></dd>

<dt><code>bm_args</code></dt><dd><p>named <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code> Further arguments for <code><a href='https://mlr3.mlr-org.com/reference/benchmark.html'>mlr3::benchmark()</a></code>.
Stores all evaluated <a href='https://mlr3.mlr-org.com/reference/ResampleResult.html'>mlr3::ResampleResult</a>s when evaluating feature combinations.</p></dd>

<dt><code>bmr</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>mlr3::BenchmarkResult</a></p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><code>FSelectInstance</code></p>
<p><hr>
<a id="method-print"></a></p><h3>Method <code><a href='https://rdrr.io/r/base/print.html'>print()</a></code></h3>
<p>Print method.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$print()</pre><p></div></p>

<h3>Returns</h3>
<p><code><a href='https://rdrr.io/r/base/character.html'>character()</a></code></p>
<p><hr>
<a id="method-eval_batch"></a></p><h3>Method <code>eval_batch()</code></h3>
<p>Evaluates all feature sets in <code>states</code> through resampling.
Updates the internal <a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>BenchmarkResult</a> <code>$bmr</code> by reference.
Before and after each batch-evaluation, the <a href='Terminator.html'>Terminator</a> is checked,
and if it is positive, an exception of class <code>terminated_error</code> is raised.
This function should be internally called by the <a href='FSelect.html'>FSelect</a> object.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$eval_batch(states)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>states</code></dt><dd><p><code>matrix</code>
Each row represents a 0/1 encoded feature set.</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p>named <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code></p>
<p><hr>
<a id="method-fselect_objective"></a></p><h3>Method <code>fselect_objective()</code></h3>
<p>Evaluates a feature set <code>x</code> and returns a scalar objective value,
where the return value is negated if the measure is maximized.
Internally, <code>$eval_batch()</code> is called with a single row.
This method is useful for feature selection algorithms that take a objective function.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$fselect_objective(x)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>x</code></dt><dd><p><code>numeric</code>
0/1 encoded feature set</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code></p>
<p><hr>
<a id="method-archive"></a></p><h3>Method <code>archive()</code></h3>
<p>Returns a table of contained resample results with corresponding feature sets.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$archive()</pre><p></div></p>

<h3>Returns</h3>
<p><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table</a></p>
<p><hr>
<a id="method-optimization_path"></a></p><h3>Method <code>optimization_path()</code></h3>
<p>Queries the <a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>mlr3::BenchmarkResult</a> for the <code>n</code> best feature sets (default is <code>1</code>)
of the batches specified in <code>m</code> (default is the last batch).</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$optimization_path(n = 1, m = NULL)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>n</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code>
Number of feature sets per batch.</p></dd>

<dt><code>m</code></dt><dd><p><code>integer</code>
Batch numbers.</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table</a></p>
<p><hr>
<a id="method-best"></a></p><h3>Method <code>best()</code></h3>
<p>Queries the <a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>mlr3::BenchmarkResult</a> for the best <a href='https://mlr3.mlr-org.com/reference/ResampleResult.html'>mlr3::ResampleResult</a>
according to <code>measure</code> (default is the first measure in <code>$measures</code>
of the batches specified in <code>m</code> (default is the all batches).
In case of ties, one of the tied values is selected randomly.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$best(measure = NULL, m = NULL)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>measure</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Measure.html'>mlr3::Measure</a></p></dd>

<dt><code>m</code></dt><dd><p><code>ìnteger</code></p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><a href='https://mlr3.mlr-org.com/reference/ResampleResult.html'>mlr3::ResampleResult</a></p>
<p><hr>
<a id="method-assign_result"></a></p><h3>Method <code>assign_result()</code></h3>
<p>The <a href='FSelect.html'>FSelect</a> object writes the best found feature set
and estimated performance values here. For internal use.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$assign_result(feat, perf)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>feat</code></dt><dd><p><code>character</code> Must be character vector of feature names existing in <code>task</code></p></dd>

<dt><code>perf</code></dt><dd><p><code>numeric</code> Must be named numeric of performance measures, named with performance IDs, regarding all elements in <code>measures</code>.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FSelectInstance$clone(deep = FALSE)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>mlr3</span>)

<span class='co'># Objects required to define the performance evaluator</span>
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"iris"</span>)
<span class='no'>measures</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msrs</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"classif.ce"</span>))
<span class='no'>learner</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span>(<span class='st'>"classif.rpart"</span>)
<span class='no'>resampling</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span>(<span class='st'>"cv"</span>)
<span class='no'>terminator</span> <span class='kw'>=</span> <span class='fu'><a href='term.html'>term</a></span>(<span class='st'>"evals"</span>, <span class='kw'>n_evals</span> <span class='kw'>=</span> <span class='fl'>8</span>)

<span class='no'>instance</span> <span class='kw'>=</span> <span class='no'>FSelectInstance</span>$<span class='fu'>new</span>(
  <span class='kw'>task</span> <span class='kw'>=</span> <span class='no'>task</span>,
  <span class='kw'>learner</span> <span class='kw'>=</span> <span class='no'>learner</span>,
  <span class='kw'>resampling</span> <span class='kw'>=</span> <span class='no'>resampling</span>,
  <span class='kw'>measures</span> <span class='kw'>=</span> <span class='no'>measures</span>,
  <span class='kw'>terminator</span> <span class='kw'>=</span> <span class='no'>terminator</span>
)

<span class='co'># Evaluate 4 feature sets</span>
<span class='no'>m</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span>(<span class='fl'>4</span>)
<span class='no'>instance</span>$<span class='fu'>eval_batch</span>(<span class='no'>m</span>)</div><div class='output co'>#&gt; $batch_nr
#&gt; [1] 1
#&gt; 
#&gt; $uhashes
#&gt; [1] "7f12c37a-e231-4c83-9a9c-22e11763db6e"
#&gt; [2] "dc90554d-95d3-4558-a674-f3917d2d8222"
#&gt; [3] "d271c904-3b82-41d9-be8b-1bb5bb949248"
#&gt; [4] "75fdbda2-1912-46e9-b5f4-51163f652266"
#&gt; 
#&gt; $perf
#&gt;    classif.ce
#&gt; 1: 0.06000000
#&gt; 2: 0.04666667
#&gt; 3: 0.30000000
#&gt; 4: 0.50000000
#&gt; </div><div class='input'><span class='no'>instance</span>$<span class='fu'>archive</span>()</div><div class='output co'>#&gt;    nr  resample_result task_id    learner_id resampling_id iters classif.ce
#&gt; 1:  1 &lt;ResampleResult&gt;    iris classif.rpart            cv    10 0.06000000
#&gt; 2:  2 &lt;ResampleResult&gt;    iris classif.rpart            cv    10 0.04666667
#&gt; 3:  3 &lt;ResampleResult&gt;    iris classif.rpart            cv    10 0.30000000
#&gt; 4:  4 &lt;ResampleResult&gt;    iris classif.rpart            cv    10 0.50000000
#&gt;    batch_nr         feat
#&gt; 1:        1 Petal.Length
#&gt; 2:        1  Petal.Width
#&gt; 3:        1 Sepal.Length
#&gt; 4:        1  Sepal.Width</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#super-class">Super class</a></li>
      <li><a href="#active-bindings">Active bindings</a></li>
      <li><a href="#methods">Methods</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Marc Becker, Patrick Schratz, Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


